{% extends 'base.html'%}
{% block content%}
<div class="container row">
    <div class="shadow p-4 mb-4 col-lg-12 col-sm-6">
        <h3>{{post.title}}</h3>
        <br>
        <p>{{post.body}}</p>
        <hr>
        <form action="{{request.path }}" method="POST">
            {{ form1.csrf_token }}
            <div class="form-group mt-2">
                {{form1.author(class="form-control", placeholder="Author")}}
            </div>
            <div class="form-group mt-2">
                {{form1.comment(class="form-control" ,placeholder="Comment")}}
            </div>
            <button type="submit" class="btn btn-primary mt-2">Post comment</button>
        </form>
    </div>
    <div class="shadow-sm p-4 col-lg-12 col-sm-6">
        {% for comment in comments %}
        <div>
            <p>{{comment.author}}</p>
            <p>{{comment.text}}</p>
            <a class="btn btn-primary btn-sm" data-bs-toggle="collapse" href="#comment-{{comment.id}}" role="button" aria-expanded="false" aria-controls="collapseExample">
                Reply
            </a>
        </div>
        <div class="collapse" id="comment-{{comment.id}}">
            <form action="{{url_for('reply_comment',post_id=post.id,comment_id=comment.id) }}" method="POST">
                {{ form2.csrf_token }}
                <div class="form-group mt-2">
                    {{form2.author(class="form-control", placeholder="Author")}}
                </div>
                <div class="form-group mt-2">
                    {{form2.reply(class="form-control" ,placeholder="Reply")}}
                </div>
                <button type="submit" class="btn btn-primary mt-2 btn-sm">Post Reply</button>
            </form>
        </div>
    {% endfor %}
</div>
</div>
</div>
{% endblock%}